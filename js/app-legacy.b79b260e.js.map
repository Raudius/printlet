{"version":3,"file":"js/app-legacy.b79b260e.js","mappings":"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","sources":["webpack://printlet/./src/App.vue","webpack://printlet/./src/components/PrintletForm.vue","webpack://printlet/./src/components/InputPdf.vue","webpack://printlet/./src/booklet_maker.js","webpack://printlet/./src/printlet.js","webpack://printlet/./src/file_utils.js","webpack://printlet/./src/components/InputPdf.vue?0efa","webpack://printlet/./src/components/InputOptions.vue","webpack://printlet/./src/components/InputOptions.vue?e442","webpack://printlet/./src/components/PrintletForm.vue?ddfb","webpack://printlet/./src/App.vue?7ccd","webpack://printlet/./src/main.js","webpack://printlet/webpack/bootstrap","webpack://printlet/webpack/runtime/chunk loaded","webpack://printlet/webpack/runtime/compat get default export","webpack://printlet/webpack/runtime/define property getters","webpack://printlet/webpack/runtime/global","webpack://printlet/webpack/runtime/hasOwnProperty shorthand","webpack://printlet/webpack/runtime/make namespace object","webpack://printlet/webpack/runtime/jsonp chunk loading","webpack://printlet/webpack/startup"],"sourcesContent":["<template id=\"app\">\n  <PrintletForm></PrintletForm>\n</template>\n\n<script>\n\nimport PrintletForm from \"@/components/PrintletForm\";\n\nexport default {\n  name: 'App',\n  components: {\n    PrintletForm\n  }\n}\n</script>\n\n\n<style>\nbody {\n  background-color: #efefef;\n  min-width: 600px;\n}\n\n#app {\n  font-family: Avenir, Helvetica, Arial, sans-serif;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n  text-align: center;\n  color: #2c3e50;\n}\n\nlabel {\n  width: 240px !important;\n  padding: 0 !important;\n}\n\n@keyframes tooltip_background {\n  0%   {background-color: rgba(0,0,0,0);}\n  100% {background-color: rgba(0,0,0,0.5);}\n}\n\n.mdc-tooltip--shown{\n  background-color: rgba(0,0,0,0.5);\n  animation-name: tooltip_background;\n  animation-duration: 1s;\n}\n\n</style>\n","<template>\n  <div class=\"form\">\n    <h1>Printlet</h1>\n    <p>Create printable booklets from your browser!</p>\n    <p>For questions and feature requests open an issue on <a href=\"http://github.com/Raudius/printlet/issues\">Github</a></p>\n    <h2>\n      1. Load PDF\n      <ui-icon\n          v-tooltip=\"'No files are uploaded, all processing is done locally inside the browser!'\"\n          aria-describedby=\"tooltip-load-pdf\"\n          :size=\"18\"\n      >\n        info\n      </ui-icon>\n    </h2>\n    <InputPdf @updated=\"setPdfFile\" />\n\n    <h2>2. Settings</h2>\n    <InputOptions @updated=\"setBookletOptions\" />\n\n    <h2>3. Download booklet</h2>\n    <ui-button raised icon=\"download_for_offline\" @click=\"submitForm\">\n      Download\n    </ui-button>\n  </div>\n</template>\n\n<script>\nimport InputPdf from \"@/components/InputPdf\";\nimport InputOptions from \"@/components/InputOptions\";\nimport {vTooltip} from \"balm-ui\";\nimport download from \"downloadjs\";\nimport {Orientation, OutputFormats} from \"@/printlet\";\nimport {createBooklets, createBookletsSinglePdf} from \"@/booklet_maker\";\nimport {createZip} from \"@/file_utils\";\n\nexport default {\n  name: 'PrintletForm',\n  components: {InputOptions, InputPdf},\n  data() {\n    return {\n      booklet_options: null,\n      pdf_file: null\n    }\n  },\n  methods: {\n    setBookletOptions(booklet_data) {\n      this.booklet_options = booklet_data;\n    },\n    setPdfFile(pdf_data) {\n      this.pdf_file = pdf_data;\n    },\n    async submitForm () {\n      if (!this.pdf_file || this.pdf_file.orientation === Orientation.UNKNOWN) {\n        alert('PDF file is missing!');\n        return;\n      }\n\n      const output_name = this.pdf_file.getBaseName() + '_booklet';\n\n      if (this.booklet_options.getOutputFormat() === OutputFormats.ZIP) {\n        const booklet_pdfs = await createBooklets(this.pdf_file, this.booklet_options);\n        const file = await createZip(this.pdf_file.getBaseName(), booklet_pdfs);\n\n        download(file, output_name + '.zip', 'application/zip');\n      } else {\n        const file = await createBookletsSinglePdf(this.pdf_file, this.booklet_options);\n\n        download(file, output_name + '.pdf', 'application/pdf');\n      }\n      this.booklet_options.save();\n    }\n  },\n  directives: {\n    'tooltip': vTooltip\n  }\n}\n</script>\n\n<!-- Add \"scoped\" attribute to limit CSS to this component only -->\n<style scoped>\n@media (orientation: landscape) {\n  .form {\n    margin-right: 30%;\n    margin-left: 30%;\n  }\n}\n.form {\n  text-align: left;\n}\n\nh1 {\n  text-align: left;\n}\n</style>\n","<template>\n  <div class=\"upload_container\">\n    <div>\n      <ui-file accept=\"application/pdf\" @change=\"loadFile\" text=\"Select file...\"></ui-file>\n      <div v-if=\"fileName\" class=\"upload_container_file_name\">\n        {{fileName}}\n      </div>\n    </div>\n  </div>\n\n  <br/>\n\n  <div v-if=\"isPdfOrientationAmbiguous\">\n    <ui-alert class=\"no_top_margin\" state=\"warning\">\n      Looks like this document contains both landscape and portrait pages.\n    </ui-alert>\n    <ui-form-field>\n      <label class=\"min_width_m\">Select orientation:</label>\n      <span>\n            <ui-segmented-buttons\n                v-model=\"pdf_file.pdf_orientation_manual\"\n                @change=\"updateForm\"\n                :items=\"[\n                  {\n                    icon: 'crop_portrait',\n                    text: 'Portrait'\n                  },\n                  {\n                    icon: 'crop_landscape',\n                    text: 'Landscape'\n                  }\n                ]\"\n                single-select\n            />\n          </span>\n    </ui-form-field>\n  </div>\n</template>\n\n<script>\nimport {loadPdfFile} from \"@/file_utils\";\nimport {Orientation} from \"@/printlet\";\n\nexport default {\n  name: \"InputPdf\",\n  data() {\n    return {\n      pdf_file: {},\n    }\n  },\n  emits: {\n    'updated': null\n  },\n  methods: {\n    async loadFile (event) {\n      const file = event[0].sourceFile;\n      this.pdf_file = await loadPdfFile(file);\n\n      this.updateForm();\n    },\n    updateForm() {\n      this.$emit('updated', this.pdf_file)\n    }\n  },\n  computed: {\n    fileName() {\n      return this.pdf_file?.file_name;\n    },\n    isPdfOrientationAmbiguous() {\n      return this.pdf_file?.document !== null && this.pdf_file?.orientation === Orientation.UNKNOWN;\n    }\n  }\n}\n</script>\n\n<style scoped>\n\n.upload_container {\n  border: dashed darkgray;\n  border-radius: 25px;\n  min-height: 100px;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  text-align: center;\n}\n\n.upload_container_file_name {\n  margin-top: 10px;\n}\n\n</style>","import {PageSizes, PDFDocument, degrees} from \"pdf-lib\";\nimport {Orientation, TextDirection} from \"@/printlet\";\n\nclass Vec2D {\n    constructor(x=0, y=0) {\n        this.x = x;\n        this.y = y;\n    }\n\n    transpose () {\n        [this.x, this.y] = [this.y, this.x]\n    }\n}\n\n/**\n * @param {PdfFile} pdf_file\n * @param {BookletOptions} booklet_options\n * @returns {Promise<Uint8Array[]>}\n */\nexport function createBooklets(pdf_file, booklet_options) {\n    return Promise.all(booklet_options.getPageProviders(pdf_file).map(\n        async (page_provider) => {\n            const booklet_pdf = await createBooklet(pdf_file, booklet_options, page_provider);\n            return await (booklet_pdf).save();\n        }\n    ));\n}\n\n/**\n * @param {PdfFile} pdf_file\n * @param {BookletOptions} booklet_options\n * @returns {Promise<Uint8Array>}\n */\nexport async function createBookletsSinglePdf(pdf_file, booklet_options) {\n    let single_pdf = await PDFDocument.create();\n\n    const page_providers = booklet_options.getPageProviders(pdf_file);\n    for (const idx in page_providers) {\n        const page_provider = page_providers[idx];\n        const filler_pages = single_pdf.getPageCount() % 2;\n        for (let i=0; i<filler_pages; i++) {\n            single_pdf.addPage()\n        }\n\n        await createBooklet(pdf_file, booklet_options, page_provider, single_pdf)\n    }\n\n    return single_pdf.save();\n}\n\n/**\n * @param {PdfFile} pdf_file\n * @param {BookletOptions} booklet_options\n * @param {PageProvider} page_provider\n * @param {PDFDocument} booklet_doc\n * @returns {Promise<PDFDocument>}\n */\nasync function createBooklet(pdf_file, booklet_options, page_provider, booklet_doc = null) {\n    const booklet_page_size = PageSizes[booklet_options.page_size];\n    const booklet_page_count = calculateBookletPageCount(pdf_file, booklet_options, page_provider);\n\n    if (booklet_doc === null) {\n        booklet_doc = await PDFDocument.create();\n    }\n    const start_booklet_doc_page = booklet_doc.getPageCount();\n    for (let i=0; i<booklet_page_count; i++) {\n        const page = booklet_doc.addPage(booklet_page_size);\n        if (booklet_options.rotate_even_pages && i % 2 === 1) {\n            page.setRotation(degrees(180))\n        }\n    }\n\n    const text_r2l = booklet_options.text_read_direction === TextDirection.R2L;\n    const rotate_page = isPageRotated(pdf_file, booklet_options);\n    const render_left_to_right = !rotate_page && !text_r2l;\n    const render_down_to_up = !rotate_page || !text_r2l;\n\n    const page_grid = calculatePageGrid(pdf_file, booklet_options);\n    const grid_position = new Vec2D(); // (x = 0) = render_left_to_right ? left : right ; (y = 0) = bottom\n\n    const page_dimensions = new Vec2D(booklet_page_size[0] / page_grid.x, booklet_page_size[1] / page_grid.y)\n\n    const pdf = await PDFDocument.load(await pdf_file.document.save());\n    let i = page_provider.reset();\n    while (i >= 0) {\n        const booklet_page_index = start_booklet_doc_page + calculateBookletPageForPdfPage(i - page_provider.start, booklet_page_count, page_grid);\n        const booklet_page = booklet_doc.getPage(booklet_page_index);\n\n        const page = pdf.getPages()[i];\n        const embedded_page = await booklet_doc.embedPage(\n            page,\n            null,\n            rotate_page ? [0, -1, 1, 0, 0, page.getWidth()] : null\n        );\n\n        rotate_page && page_dimensions.transpose();\n        const scale_factor = Math.min(page_dimensions.x / page.getWidth(), page_dimensions.y / page.getHeight());\n        rotate_page && page_dimensions.transpose();\n\n        booklet_page.drawPage(embedded_page, {\n            x: (render_left_to_right ? grid_position.x : page_grid.x - grid_position.x - 1) * page_dimensions.x,\n            y: (render_down_to_up ? grid_position.y : page_grid.y - grid_position.y - 1) * page_dimensions.y,\n            xScale: scale_factor,\n            yScale: scale_factor\n        });\n\n        advanceGridPosition(grid_position, page_grid);\n        i = page_provider.next();\n    }\n\n    return booklet_doc;\n}\n\n/**\n * Advance the current position along the grid.\n * @param grid_position\n * @param grid\n */\nfunction advanceGridPosition(grid_position, grid) {\n    if (++grid_position.x >= grid.x) {\n        grid_position.x = 0;\n        if (++grid_position.y >= grid.y) {\n            grid_position.y = 0;\n        }\n    }\n}\n\n/**\n * Calculates the page of the output PDF on which a given page of the input PDF belongs.\n * This is calculated by first determining the \"index\" of the input page. This index groups consecutive pages that will\n * appear side by side on the output PDF. These can then be treated as a page on a PDF where consecutive pages are not\n * shown side by side.\n *\n * @param {number} pdf_page\n * @param {number} booklet_page_count\n * @param {Vec2D} page_grid\n * @returns {number}\n */\nfunction calculateBookletPageForPdfPage(pdf_page, booklet_page_count, page_grid) {\n    const index = Math.floor(pdf_page / ((page_grid.x*page_grid.y) / 2));\n    return Math.abs((index % booklet_page_count) - ((booklet_page_count-1) * Math.floor(index/booklet_page_count)));\n}\n\n/**\n * The output pdf is always generated in portrait, which would show the fold along the middle horizontally.\n * So we only need to rotate the pages if the fold is vertical.\n * @param pdf_file\n * @param booklet_options\n * @returns {boolean}\n */\nfunction isPageRotated(pdf_file, booklet_options) {\n    return booklet_options.getFoldOrientation(pdf_file) === Orientation.VERTICAL;\n}\n\n/**\n * Determines the amount of pages in the resulting booklet PDF.\n * Note that to create the booklet we may need to include some intentionally blank pages at the end of the booklet.\n * The blank pages are accounted for by basing this calculation on the amount of paper needed to print the booklet.\n *\n * @param {PdfFile} pdf_file\n * @param {BookletOptions} booklet_options\n * @param {PageProvider} page_provider\n * @returns {number}\n */\nexport function calculateBookletPageCount(pdf_file, booklet_options, page_provider) {\n    const pdf_page_count = page_provider.range();\n    const pages_per_booklet_paper = calculatePdfPagesPerBookletPage(pdf_file, booklet_options) * 2;\n\n    return Math.ceil(pdf_page_count / pages_per_booklet_paper) * 2\n}\n\n/**\n * @param {PdfFile} pdf_file\n * @param {BookletOptions} booklet_options\n * @returns {number}\n */\nexport function calculatePdfPagesPerBookletPage(pdf_file, booklet_options) {\n    const grid = calculatePageGrid(pdf_file, booklet_options);\n    return grid.x * grid.y;\n}\n\n\n/**\n * Determines whether the booklet will contain two PDF pages on each booklet page. This can happen if (for example) we\n * make a horizontal booklet for a PDF with vertical pages: we fill fit two PDF pages side-by-side on each page of the\n * booklet.\n *\n * @param {PdfFile} pdf_file\n * @param {BookletOptions} booklet_options\n * @returns {Vec2D}\n */\nfunction calculatePageGrid(pdf_file, booklet_options) {\n    return pdf_file.getOrientation() === booklet_options.getFoldOrientation(pdf_file)\n        ? new Vec2D(1,2) : new Vec2D(2,2);\n}\n","import {calculatePdfPagesPerBookletPage} from \"@/booklet_maker\";\nimport Cookies from 'js-cookie'\n\nconst DefaultCookieOptions = {\n    expires: 5000,\n    sameSite: 'strict'\n}\n\nexport const Orientation = {\n    UNKNOWN: -1,\n    PORTRAIT: 0,\n    LANDSCAPE: 1,\n    VERTICAL: 0,\n    HORIZONTAL: 1\n};\n\nexport const OutputFormats = {\n    PDF: 0,\n    ZIP: 1\n}\n\nexport const TextDirection = {\n    L2R: 0,\n    R2L: 1\n}\n\n/**\n * Represents an uploaded PdfFile.\n */\nexport class PdfFile {\n    orientation_manual = Orientation.UNKNOWN;\n\n    /**\n     * @param {String} file_name\n     * @param {PDFDocument} document\n     */\n    constructor (file_name, document) {\n        this.file_name = file_name;\n        this.document = document;\n        this.orientation = detectPdfOrientation(document);\n    }\n\n    getOrientation () {\n        return (this.orientation !== Orientation.UNKNOWN) ? this.orientation : this.orientation_manual;\n    }\n\n    getBaseName() {\n        return this.file_name.replaceAll('.pdf', '');\n    }\n}\n\n/**\n * Loads the booklet options from the cookie store.\n * @returns {BookletOptions}\n */\nexport function loadBookletOptions() {\n    const booklet_options = new BookletOptions();\n\n    for (const key in booklet_options) {\n        const type = booklet_options[key]?.constructor;\n        const value = Cookies.get(key);\n        const casted_value = type ? (type) (value) : null;\n        if (value && casted_value !== null) {\n            booklet_options[key] = casted_value;\n            console.log(key + \" -> \" + casted_value)\n        }\n    }\n\n    return booklet_options;\n}\n\n/**\n * Collects all the options that define how the booklet should be created.\n */\nexport class BookletOptions {\n    constructor() {\n        this.text_read_direction = TextDirection.L2R;\n        this.pages_per_page = 1;\n        this.rotate_even_pages = false;\n        this.page_size = \"A4\";\n        this.multiple_booklets = false;\n        this.booklet_size = 6;\n        this.output_format = OutputFormats.ZIP;\n    }\n\n    /**\n     * Saves the booklet options to the cookie store.\n     */\n    save () {\n        for (const key in this) {\n            Cookies.set(key, this[key], DefaultCookieOptions);\n        }\n    }\n\n    /**\n     * Returns the output format. If multiple-booklets is disabled we default to PDF output.\n     *\n     * @returns {number}\n     */\n    getOutputFormat () {\n        return this.multiple_booklets ? this.output_format : OutputFormats.PDF;\n    }\n\n    /**\n     * Returns the fold orientation given a vertical page.\n     * @returns {number}\n     */\n    getFoldOrientation (pdf_file) {\n        const pdf_orientation = pdf_file.getOrientation();\n        const pdf_orientation_opposite = pdf_orientation === Orientation.PORTRAIT ? Orientation.LANDSCAPE : Orientation.PORTRAIT;\n\n        return this.pages_per_page % 2 === 0\n            ? pdf_orientation_opposite\n            : pdf_orientation;\n    }\n\n    /**\n     * @param {PdfFile} pdf_file\n     * @returns {PageProvider[]}\n     */\n    getPageProviders(pdf_file) {\n        const page_providers = [];\n        const p_max = pdf_file.document.getPageCount();\n        const booklet_size = this.multiple_booklets ? this.booklet_size : p_max;\n        const p_step = calculatePdfPagesPerBookletPage(pdf_file, this) * booklet_size * 2;\n\n        let p = 0;\n        while (p < p_max) {\n            const page_provider = new PageProvider();\n\n            page_provider.start = p;\n            p += p_step;\n            page_provider.end = Math.min(p, p_max);\n            page_providers.push(page_provider);\n        }\n\n        return page_providers;\n    }\n}\n\n/**\n * Utility class which provides a convinient way to iterate through subsets of input PDF pages.\n */\nclass PageProvider {\n    current = 0;\n    start = 0;\n    end = 0;\n    step = 1;\n\n    constructor(start, end) {\n        this.start = start;\n        this.current = start;\n        this.end = end;\n    }\n\n    range () {\n        return this.end - this.start;\n    }\n    next () {\n        this.current += this.step;\n        return (this.end - this.current > 0) ? this.current : -1;\n    }\n    reset () {\n        this.current = this.start\n        return this.current;\n    }\n}\n\n/**\n * Detects the orientation of a PDF document.\n * @param {PDFDocument} pdf_document\n * @returns {number}\n */\nfunction detectPdfOrientation (pdf_document) {\n    const pages = pdf_document.getPages();\n\n    let orientation = detectPageOrientation(pages[0]);\n    for (let i=0; i<pages.length; i++) {\n        const page = pages[i];\n        const page_orientation = detectPageOrientation(page)\n\n        if (orientation !== page_orientation) {\n            return Orientation.UNKNOWN;\n        }\n    }\n    return orientation;\n}\n\n/**\n * Detects the Orientation of a single page.\n * @param {PDFPage} page\n * @returns {number}\n */\nfunction detectPageOrientation (page) {\n    const {width, height} = page.getSize()\n    const rotated = (page.getRotation().angle / 90) % 2 !== 0;\n    const landscape = width > height;\n\n    return (landscape && !rotated) || (!landscape && rotated)\n        ? Orientation.LANDSCAPE\n        : Orientation.PORTRAIT;\n}","import {PDFDocument} from \"pdf-lib\";\nimport * as JSZip from \"jszip\";\nimport {PdfFile} from \"@/printlet\";\n\n/**\n * @param {File} file\n * @returns {Promise<PdfFile>}\n */\nexport async function loadPdfFile(file)\n{\n    return await fileToBase64(file).then(async pdf_content => {\n        const document = await PDFDocument.load(pdf_content);\n        return new PdfFile(file.name, document);\n    });\n}\n\n/**\n * @param {String} base_name\n * @param {Uint8Array[]} files\n * @returns {Promise<Uint8Array>}\n */\nexport async function createZip (base_name, files) {\n    let zip = new JSZip();\n\n    files.forEach((file, index) => {\n        const name = base_name + \"_\" + (index+1) + \".pdf\";\n        zip.file(name, file)\n    });\n\n    return zip.generateAsync({type:\"uint8array\"});\n}\n\n/**\n * @param {File} file\n * @returns {Promise<String>}\n */\nconst fileToBase64 = (file) => new Promise((resolve, reject) => {\n    const reader = new FileReader();\n    reader.readAsDataURL(file);\n    reader.onload = () => resolve(reader.result);\n    reader.onerror = error => reject(error);\n});","import { render } from \"./InputPdf.vue?vue&type=template&id=06351356&scoped=true\"\nimport script from \"./InputPdf.vue?vue&type=script&lang=js\"\nexport * from \"./InputPdf.vue?vue&type=script&lang=js\"\n\nimport \"./InputPdf.vue?vue&type=style&index=0&id=06351356&scoped=true&lang=css\"\n\nimport exportComponent from \"/home/raul/printlet/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-06351356\"]])\n\nexport default __exports__","<template>\n  <ui-form nowrap item-margin-bottom=\"16\">\n    <ui-form-field>\n      <label>\n        Booklet type:\n        <ui-icon\n          v-tooltip=\"'Fit 2 input pages per booklet page by selecting the \\'double page\\' option.'\"\n          :size=\"18\"\n          aria-describedby=\"tooltip_booklet_type\">info</ui-icon>\n      </label>\n      <span>\n        <ui-segmented-buttons\n            :model-value=\"this.options.pages_per_page-1\"\n            @update:modelValue=\"updatePagesPerPage\"\n            single-select\n            :items=\"[\n              { text: 'Single page', icon: 'rectangle' },\n              { text: 'Double page', icon: 'view_agenda' }\n            ]\"\n        />\n      </span>\n    </ui-form-field>\n\n  </ui-form>\n\n  <ui-collapse with-icon ripple>\n    <template #toggle>\n      <div>Advanced options</div>\n    </template>\n    <ui-form nowrap item-margin-bottom=\"16\">\n      <ui-form-field>\n        <label>Text read direction:</label>\n        <span>\n            <ui-segmented-buttons\n                v-model=\"options.text_read_direction\"\n                @change=\"updated\"\n                :items=\"[\n                  {\n                    icon: 'east',\n                    text: 'Left to right'\n                  },\n                  {\n                    icon: 'west',\n                    text: 'Right to left'\n                  },\n                ]\"\n                single-select\n            />\n          </span>\n      </ui-form-field>\n\n      <ui-form-field>\n        <label>Print page size:</label>\n        <span>\n        <ui-select\n            v-model=\"options.page_size\"\n            :options=\"PageSizeOptions\"\n            @change=\"updated\"\n        ></ui-select>\n      </span>\n      </ui-form-field>\n\n      <ui-form-field>\n        <label>\n          Create multiple booklets:\n          <ui-icon\n              v-tooltip=\"'For large PDF files it is often easier to create multiple smaller booklets.'\"\n              :size=\"18\"\n              aria-describedby=\"tooltip_multiple_booklets\">info</ui-icon>\n        </label>\n        <ui-switch\n            v-model=\"options.multiple_booklets\"\n            @change=\"updated\"\n            input-id=\"input_booklet_size\"\n            :true-value=\"4\"\n            :false-value=\"0\"\n        />\n      </ui-form-field>\n\n      <ui-form-field v-if=\"options.multiple_booklets\">\n        <label>Sheets per booklet:</label>\n        <ui-textfield input-type=\"number\" v-model=\"options.booklet_size\"></ui-textfield>\n      </ui-form-field>\n\n      <ui-form-field v-if=\"options.multiple_booklets\">\n        <label>Output format:</label>\n        <ui-select\n            v-model=\"this.options.output_format\"\n            @change=\"updated\"\n            :options=\"OutputFormatOptions\"\n        />\n      </ui-form-field>\n\n      <ui-form-field>\n        <label>\n          Rotate alternate pages 180°:\n          <ui-icon\n              v-tooltip=\"'Some printers may flip the back of a double-sided print. You can correct this behaviour by ticking this option.'\"\n              :size=\"18\"\n              aria-describedby=\"tooltip_rotate_pages\">info</ui-icon>\n        </label>\n        <ui-switch v-model=\"options.rotate_even_pages\" @change=\"updated\" />\n      </ui-form-field>\n    </ui-form>\n  </ui-collapse>\n</template>\n\n<script>\nimport {loadBookletOptions, OutputFormats} from \"@/printlet\";\nimport {PageSizes} from \"pdf-lib\";\nimport {vTooltip} from \"balm-ui\";\n\nconst PageSizeOptions = Object.keys(PageSizes).map((key) => {\n  return { label: key, value: key }\n});\n\nconst OutputFormatOptions = [\n  { label: \"Single PDF file\", value: OutputFormats.PDF },\n  { label: \"Zipped PDF files\", value: OutputFormats.ZIP }\n]\n\nexport default {\n  name: \"InputOptions\",\n  data() {\n    return {\n      PageSizeOptions,\n      OutputFormatOptions,\n      options: loadBookletOptions(),\n      multiple_booklets: false\n    }\n  },\n  emits: {\n    'updated': null\n  },\n  methods: {\n    updated() {\n      this.$emit('updated', this.options);\n    },\n    updatePagesPerPage(value) {\n      this.options.pages_per_page = value + 1;\n      this.updated();\n    }\n  },\n  mounted() {\n    this.updated();\n  },\n  directives: {\n    'tooltip': vTooltip\n  }\n}\n</script>\n\n<style scoped>\n</style>","import { render } from \"./InputOptions.vue?vue&type=template&id=44fb938a\"\nimport script from \"./InputOptions.vue?vue&type=script&lang=js\"\nexport * from \"./InputOptions.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"/home/raul/printlet/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { render } from \"./PrintletForm.vue?vue&type=template&id=14a98ac4&scoped=true\"\nimport script from \"./PrintletForm.vue?vue&type=script&lang=js\"\nexport * from \"./PrintletForm.vue?vue&type=script&lang=js\"\n\nimport \"./PrintletForm.vue?vue&type=style&index=0&id=14a98ac4&scoped=true&lang=css\"\n\nimport exportComponent from \"/home/raul/printlet/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-14a98ac4\"]])\n\nexport default __exports__","import { render } from \"./App.vue?vue&type=template&id=5f0c8db4\"\nimport script from \"./App.vue?vue&type=script&lang=js\"\nexport * from \"./App.vue?vue&type=script&lang=js\"\n\nimport \"./App.vue?vue&type=style&index=0&id=5f0c8db4&lang=css\"\n\nimport exportComponent from \"/home/raul/printlet/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { createApp } from 'vue';\nimport App from './App.vue';\n\nimport BalmUI from 'balm-ui'; // Official Google Material Components\nimport BalmUIPlus from 'balm-ui-plus'; // BalmJS Team Material Components\nimport 'balm-ui-css';\n\nconst app = createApp(App);\n\napp.use(BalmUI);\napp.use(BalmUIPlus);\n\napp.mount('#app');","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","var deferred = [];\n__webpack_require__.O = function(result, chunkIds, fn, priority) {\n\tif(chunkIds) {\n\t\tpriority = priority || 0;\n\t\tfor(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];\n\t\tdeferred[i] = [chunkIds, fn, priority];\n\t\treturn;\n\t}\n\tvar notFulfilled = Infinity;\n\tfor (var i = 0; i < deferred.length; i++) {\n\t\tvar chunkIds = deferred[i][0];\n\t\tvar fn = deferred[i][1];\n\t\tvar priority = deferred[i][2];\n\t\tvar fulfilled = true;\n\t\tfor (var j = 0; j < chunkIds.length; j++) {\n\t\t\tif ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every(function(key) { return __webpack_require__.O[key](chunkIds[j]); })) {\n\t\t\t\tchunkIds.splice(j--, 1);\n\t\t\t} else {\n\t\t\t\tfulfilled = false;\n\t\t\t\tif(priority < notFulfilled) notFulfilled = priority;\n\t\t\t}\n\t\t}\n\t\tif(fulfilled) {\n\t\t\tdeferred.splice(i--, 1)\n\t\t\tvar r = fn();\n\t\t\tif (r !== undefined) result = r;\n\t\t}\n\t}\n\treturn result;\n};","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = function(module) {\n\tvar getter = module && module.__esModule ?\n\t\tfunction() { return module['default']; } :\n\t\tfunction() { return module; };\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = function(exports, definition) {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = function(obj, prop) { return Object.prototype.hasOwnProperty.call(obj, prop); }","// define __esModule on exports\n__webpack_require__.r = function(exports) {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","// no baseURI\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t143: 0\n};\n\n// no chunk on demand loading\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n__webpack_require__.O.j = function(chunkId) { return installedChunks[chunkId] === 0; };\n\n// install a JSONP callback for chunk loading\nvar webpackJsonpCallback = function(parentChunkLoadingFunction, data) {\n\tvar chunkIds = data[0];\n\tvar moreModules = data[1];\n\tvar runtime = data[2];\n\t// add \"moreModules\" to the modules object,\n\t// then flag all \"chunkIds\" as loaded and fire callback\n\tvar moduleId, chunkId, i = 0;\n\tif(chunkIds.some(function(id) { return installedChunks[id] !== 0; })) {\n\t\tfor(moduleId in moreModules) {\n\t\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t\t}\n\t\t}\n\t\tif(runtime) var result = runtime(__webpack_require__);\n\t}\n\tif(parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n\tfor(;i < chunkIds.length; i++) {\n\t\tchunkId = chunkIds[i];\n\t\tif(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n\t\t\tinstalledChunks[chunkId][0]();\n\t\t}\n\t\tinstalledChunks[chunkId] = 0;\n\t}\n\treturn __webpack_require__.O(result);\n}\n\nvar chunkLoadingGlobal = self[\"webpackChunkprintlet\"] = self[\"webpackChunkprintlet\"] || [];\nchunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\nchunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));","// startup\n// Load entry module and return exports\n// This entry module depends on other loaded chunks and execution need to be delayed\nvar __webpack_exports__ = __webpack_require__.O(undefined, [998], function() { return __webpack_require__(9397); })\n__webpack_exports__ = __webpack_require__.O(__webpack_exports__);\n"],"names":["_createBlock","_component_PrintletForm","class","_createElementVNode","href","_createElementBlock","_hoisted_2","_hoisted_3","_hoisted_4","_component_ui_icon","size","_createVNode","_component_InputPdf","onUpdated","$options","_hoisted_7","_component_InputOptions","_hoisted_8","_component_ui_button","raised","icon","onClick","_component_ui_file","accept","onChange","text","_toDisplayString","_component_ui_alert","state","_component_ui_form_field","_hoisted_6","_component_ui_segmented_buttons","$data","pdf_orientation_manual","$event","items","Vec2D","x","y","this","createBooklets","pdf_file","booklet_options","Promise","all","getPageProviders","map","page_provider","createBooklet","booklet_pdf","save","createBookletsSinglePdf","PDFDocument","single_pdf","page_providers","idx","filler_pages","getPageCount","i","addPage","booklet_doc","booklet_page_size","PageSizes","page_size","booklet_page_count","calculateBookletPageCount","start_booklet_doc_page","page","rotate_even_pages","setRotation","degrees","text_r2l","text_read_direction","TextDirection","R2L","rotate_page","isPageRotated","render_left_to_right","render_down_to_up","page_grid","calculatePageGrid","grid_position","page_dimensions","document","load","pdf","reset","booklet_page_index","calculateBookletPageForPdfPage","start","booklet_page","getPage","getPages","embedPage","getWidth","embedded_page","transpose","scale_factor","Math","min","getHeight","drawPage","xScale","yScale","advanceGridPosition","next","grid","pdf_page","index","floor","abs","getFoldOrientation","Orientation","VERTICAL","pdf_page_count","range","pages_per_booklet_paper","calculatePdfPagesPerBookletPage","ceil","getOrientation","DefaultCookieOptions","expires","sameSite","UNKNOWN","PORTRAIT","LANDSCAPE","HORIZONTAL","OutputFormats","PDF","ZIP","L2R","PdfFile","file_name","orientation","detectPdfOrientation","orientation_manual","replaceAll","loadBookletOptions","BookletOptions","key","type","constructor","value","Cookies","casted_value","console","log","pages_per_page","multiple_booklets","booklet_size","output_format","pdf_orientation","pdf_orientation_opposite","p_max","p_step","p","PageProvider","end","push","current","step","pdf_document","pages","detectPageOrientation","length","page_orientation","getSize","width","height","rotated","getRotation","angle","landscape","loadPdfFile","file","fileToBase64","then","pdf_content","name","createZip","base_name","files","zip","JSZip","forEach","generateAsync","resolve","reject","reader","FileReader","readAsDataURL","onload","result","onerror","error","data","emits","methods","loadFile","event","sourceFile","updateForm","$emit","computed","fileName","isPdfOrientationAmbiguous","__exports__","_component_ui_form","nowrap","options","_component_ui_collapse","ripple","toggle","_hoisted_5","_component_ui_select","_component_ui_switch","_component_ui_textfield","_hoisted_9","PageSizeOptions","Object","keys","label","OutputFormatOptions","updated","updatePagesPerPage","mounted","directives","vTooltip","components","InputOptions","InputPdf","setBookletOptions","booklet_data","setPdfFile","pdf_data","submitForm","alert","output_name","getBaseName","getOutputFormat","booklet_pdfs","download","PrintletForm","render","app","createApp","App","use","BalmUI","BalmUIPlus","mount","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","undefined","exports","module","__webpack_modules__","call","m","deferred","O","chunkIds","fn","priority","notFulfilled","Infinity","fulfilled","j","every","splice","r","n","getter","__esModule","d","a","definition","o","defineProperty","enumerable","get","g","globalThis","Function","e","window","obj","prop","prototype","hasOwnProperty","Symbol","toStringTag","installedChunks","chunkId","webpackJsonpCallback","parentChunkLoadingFunction","moreModules","runtime","some","id","chunkLoadingGlobal","self","bind","__webpack_exports__"],"sourceRoot":""}